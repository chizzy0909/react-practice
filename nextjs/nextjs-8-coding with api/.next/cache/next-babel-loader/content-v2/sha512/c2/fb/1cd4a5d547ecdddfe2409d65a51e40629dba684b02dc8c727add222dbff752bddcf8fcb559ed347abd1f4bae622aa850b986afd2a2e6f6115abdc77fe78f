{"ast":null,"code":"import fs from \"fs\";\nimport path from \"path\";\nexport default function handler(req, res) {\n  if (req.method === \"POST\") {\n    const email = req.body.email;\n    const feedbackText = req.body.text;\n    const newFeedback = {\n      id: new Date().toISOString(),\n      email: email,\n      text: feedbackText\n    }; // store that in a database or in a file\n\n    const firePath = path.join(process.cwd(), \"data\", \"feedback.json\");\n    const fileData = fs.readFileSync(firePath);\n    const data = JSON.parse(fileData);\n    data.push(newFeedback);\n    fs.writeFileSync(firePath, JSON.stringify(data));\n    res.status(201).JSON({\n      message: \"SUCCESS!\",\n      feedback: newFeedback\n    });\n  } else {\n    res.status(200).json({\n      message: \"This works!\"\n    });\n  }\n}","map":{"version":3,"sources":["/Users/chenghongzhen/Desktop/nextjs-8-coding with api/pages/api/feedback.js"],"names":["fs","path","handler","req","res","method","email","body","feedbackText","text","newFeedback","id","Date","toISOString","firePath","join","process","cwd","fileData","readFileSync","data","JSON","parse","push","writeFileSync","stringify","status","message","feedback","json"],"mappings":"AAAA,OAAOA,EAAP,MAAe,IAAf;AACA,OAAOC,IAAP,MAAiB,MAAjB;AAEA,eAAe,SAASC,OAAT,CAAiBC,GAAjB,EAAsBC,GAAtB,EAA2B;AACxC,MAAID,GAAG,CAACE,MAAJ,KAAe,MAAnB,EAA2B;AACzB,UAAMC,KAAK,GAAGH,GAAG,CAACI,IAAJ,CAASD,KAAvB;AACA,UAAME,YAAY,GAAGL,GAAG,CAACI,IAAJ,CAASE,IAA9B;AAEA,UAAMC,WAAW,GAAG;AAClBC,MAAAA,EAAE,EAAE,IAAIC,IAAJ,GAAWC,WAAX,EADc;AAElBP,MAAAA,KAAK,EAAEA,KAFW;AAGlBG,MAAAA,IAAI,EAAED;AAHY,KAApB,CAJyB,CAUzB;;AACA,UAAMM,QAAQ,GAAGb,IAAI,CAACc,IAAL,CAAUC,OAAO,CAACC,GAAR,EAAV,EAAyB,MAAzB,EAAiC,eAAjC,CAAjB;AACA,UAAMC,QAAQ,GAAGlB,EAAE,CAACmB,YAAH,CAAgBL,QAAhB,CAAjB;AACA,UAAMM,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWJ,QAAX,CAAb;AACAE,IAAAA,IAAI,CAACG,IAAL,CAAUb,WAAV;AACAV,IAAAA,EAAE,CAACwB,aAAH,CAAiBV,QAAjB,EAA2BO,IAAI,CAACI,SAAL,CAAeL,IAAf,CAA3B;AACAhB,IAAAA,GAAG,CAACsB,MAAJ,CAAW,GAAX,EAAgBL,IAAhB,CAAqB;AAAEM,MAAAA,OAAO,EAAE,UAAX;AAAuBC,MAAAA,QAAQ,EAAElB;AAAjC,KAArB;AACD,GAjBD,MAiBO;AACLN,IAAAA,GAAG,CAACsB,MAAJ,CAAW,GAAX,EAAgBG,IAAhB,CAAqB;AAAEF,MAAAA,OAAO,EAAE;AAAX,KAArB;AACD;AACF","sourcesContent":["import fs from \"fs\";\nimport path from \"path\";\n\nexport default function handler(req, res) {\n  if (req.method === \"POST\") {\n    const email = req.body.email;\n    const feedbackText = req.body.text;\n\n    const newFeedback = {\n      id: new Date().toISOString(),\n      email: email,\n      text: feedbackText,\n    };\n\n    // store that in a database or in a file\n    const firePath = path.join(process.cwd(), \"data\", \"feedback.json\");\n    const fileData = fs.readFileSync(firePath);\n    const data = JSON.parse(fileData);\n    data.push(newFeedback);\n    fs.writeFileSync(firePath, JSON.stringify(data));\n    res.status(201).JSON({ message: \"SUCCESS!\", feedback: newFeedback });\n  } else {\n    res.status(200).json({ message: \"This works!\" });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}